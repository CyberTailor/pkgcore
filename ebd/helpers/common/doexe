#!/usr/bin/env pkgcore-ebuild-helper
# Copyright: 2011 Brian Harring <ferringb@gmail.com>
# License: GPL2/BSD 3 clause

check_args 1 -

# create tempdir for handling symlinks
TMP=$(mktemp -d "${T}/.${HELPER_NAME}_tmp_XXXXXX")

exes() {
	for x in "$@"; do
		if [[ -L ${x} ]]; then
			check_command cp -- "${x}" "${TMP}" || continue
			echo "${TMP}/${x##*/}"
		elif [[ -d ${x} ]]; then
			warn "skipping directory ${x}"
			continue
		else
			echo "${x}"
		fi
	done
	return 0
}

exes "$@" | ${XARGS} install ${EXEOPTIONS} -D -t "${ED}${PKGCORE_EXEDESTTREE}" --
check_pipe

# remove tempdir
rm -rf "${TMP}"
